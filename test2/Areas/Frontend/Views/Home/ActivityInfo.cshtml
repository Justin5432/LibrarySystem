@model test2.Areas.Frontend.Models.ViewModels.ActivityViewModel;

@if (User.Identity != null && User.Identity.IsAuthenticated)
{
    Layout = "~/Areas/Frontend/Views/Shared/_Layout/_LoginAfter.cshtml";
}
else
{
    Layout = "~/Areas/Frontend/Views/Shared/_Layout/_LoginBefore.cshtml";
}

@await Html.PartialAsync("~/Areas/Frontend/Views/Shared/_Partial/_modal.cshtml")

<div class="back-to-list">
    <a href="index"><i class="bi bi-arrow-left"></i> 返回活動列表</a>
</div>

<div class="activity-detail-container">
    @if (Model.ActivityTitle != null )
    {
        <h1 class="activity-title">@Model.ActivityTitle</h1>
    }
    <div class="activity-header-meta">
        @if ( Model.StartDate !=  default(DateTime) && Model.EndDate != default(DateTime))
        {
            <span class="me-4"><i class="bi bi-calendar-event"></i> 活動日期：@Model.StartDate.ToString() ~ @Model.EndDate.ToString()</span>
        }
        else
        {
            <span class="me-4"><i class="bi bi-calendar-event"></i> 活動日期：目前尚無活動日期</span>
        }

        <span class="me-4"><i class="bi bi-geo-alt-fill"></i> 活動地點：本館電子書服務平台</span>

        @if ( Model.Audience != null)
        {
            <span><i class="bi bi-person-fill"></i> 適用對象：@Model.Audience.Audience1</span>
        }
        else
        {
            <span><i class="bi bi-person-fill"></i> 適用對象：尚無</span>
        }

    </div>

    @if ( Model.ActivityImgBase64 != null )
    {
        <img src="data:image/jpeg;base64,@Model.ActivityImgBase64" alt="活動圖片" class="activity-image">
    }
    else
    {
        <img src="https://picsum.photos/800/400?random=10" alt="活動圖片" class="activity-image">
    }

    <h3 class="section-heading">活動說明</h3>
    <div class="activity-content">
        @if ( Model.ActivityDesc != null)
        {
            <p>
                @Model.ActivityDesc
            </p>
        }
        else
        {
            <p>親愛的讀者們，準備好成為借閱超人了嗎？國立公共資訊圖書館特別企劃「電子書VIP會員活動」，邀請您一同深入數位閱讀的世界！本次活動旨在鼓勵廣大讀者善用本館豐富的電子書資源，提升閱讀樂趣與知識廣度。</p>
            <p>活動期間，只要您是本館電子書平台VIP會員，並達成指定借閱任務，就有機會獲得精美禮品與獨家榮譽。無論您是小說愛好者、學術研究者，或是喜愛各類知識的探索者，都能在我們的電子書庫中找到心儀的內容。</p>
            <p>我們將定期公布最新任務與排行榜，讓您在閱讀的同時，也能感受到競爭的樂趣。歡迎所有對電子書有興趣的朋友們踴躍參與，一同成為數位閱讀的領航者！</p>
            <ul>
                <li>活動目標：推廣電子書閱讀，提升會員活躍度。</li>
                <li>參與對象：國立公共資訊圖書館電子書VIP會員。</li>
                <li>獎勵機制：依借閱量及參與度給予不同等級獎勵，詳情請參考活動官網。</li>
            </ul>
        }
    </div>

    <!-- <h3 class="section-heading">活動資訊概覽</h3>
    <div class="row">
        <div class="col-md-6">
            <div class="info-item">
                <strong><i class="bi bi-person-fill"></i> 適用對象：</strong>一般大眾
            </div>
            <div class="info-item">
                <strong><i class="bi bi-tag-fill"></i> 活動類別：</strong>
                <span class="tag-badge">活動</span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="info-item">
                <strong><i class="bi bi-telephone-fill"></i> 聯絡電話：</strong>(04)2262-5100
            </div>
            <div class="info-item">
                <strong><i class="bi bi-building"></i> 主辦單位：</strong>國立公共資訊圖書館
            </div>
        </div>
    </div> -->

    <div class="register-box">
        <h4><i class="bi bi-clipboard-check"></i> 報名資訊</h4>
        @* <div class="info-item">
            
            <strong>報名起訖：</strong>無需報名
        </div> *@
        <div class="info-item">
            @if (Model.Capacity != 0 && DateTime.Now >= Model.StartDate && DateTime.Now <= Model.EndDate)
            {
                <p>
                    <strong>報名狀態：</strong>開放中
                </p>
            }
            else
            {
                <p>
                    <strong>報名狀態：</strong>已截止
                </p>
            }
        </div>
        <div class="info-item">
            @if (Model.Capacity == -1)
            {
                <p>
                    <strong>剩餘名額：</strong>不限制
                </p>
            }
            else
            {
                <p>
                    <strong>剩餘名額：</strong>@Model.Capacity
                </p>
            }
        </div>
        @if ((DateTime.Now >= Model.StartDate && DateTime.Now <= Model.EndDate) != true)
        {
            <button type="button" class="btn btn-primary register-btn-detail disabled">不在報名時間內</button>
            <small class="d-block text-center mt-2 text-muted">目前不再活動報名時間內，請於活動報名期間內報名。</small>
        }
        else if (Model.Capacity == -1)
        {
            <button type="button" class="btn btn-primary register-btn-detail disabled">無需報名</button>
            <small class="d-block text-center mt-2 text-muted">本活動無需事前報名，請於活動期間自由參與。</small>
        }
        else if (Model.Capacity == 0)
        {
            <button type="button" class="btn btn-primary register-btn-detail disabled">報名已截止</button>
            <small class="d-block text-center mt-2 text-muted">本活動報名人數已滿，下次請早。</small>
        }
        else
        {
            <button type="button" class="btn btn-primary register-btn-detail">點我報名</button>
            <small class="d-block text-center mt-2 text-muted">本活動正在開放報名，心動不如馬上行動！</small>
        }

    </div>

</div>
